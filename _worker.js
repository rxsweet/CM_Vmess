// 部署完成后在网址后面加上这个，获取订阅器默认节点，/auto

let mytoken= ['rx'];//快速订阅访问入口, 留空则不启动快速订阅

// 设置优选地址，不带端口号默认443，TLS订阅生成
let addresses = [
	'rxrx.cf.090227.xyz#自改域名',
];

// 设置优选地址api接口
let addressesapi = [
	'https://raw.githubusercontent.com/rxsweet/CM_Vmess/main/addressesapi.txt',//自用更新ip
	'https://raw.githubusercontent.com/rxsweet/CM_Vmess/main/addressesapi_自用扫描.txt',//自用扫描IP
	'https://raw.githubusercontent.com/rxsweet/CM_Vmess/main/goodDomain.txt',//自用域名
	//'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesapi.txt', //可参考内容格式 自行搭建。
	//'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressesipv6api.txt', //IPv6优选内容格式 自行搭建。
];

// 设置优选地址，不带端口号默认80，noTLS订阅生成
let addressesnotls = [
	'cloudflare.cfgo.cc#域名',
];

// 设置优选noTLS地址api接口
let addressesnotlsapi = [
	'https://raw.githubusercontent.com/rxsweet/CM_Vmess/main/addressesapi.txt',//自用ip地址
	//'https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/addressesapi.txt',
];

let DLS = 8;//速度下限
let addressescsv = [
	//'https://raw.githubusercontent.com/cmliu/WorkerVless2sub/main/addressescsv.csv', //iptest测速结果文件。
];

let subconverter = "SUBAPI.fxxk.dedyn.io"; //在线订阅转换后端，目前使用肥羊的订阅转换功能。支持自建psub 可自行搭建https://github.com/bulianglin/psub
let subconfig = "https://raw.githubusercontent.com/rxsweet/all/main/githubTools/cfClashConfig.ini"; //订阅配置文件
//let subconfig = https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode.ini"; //原订阅配置文件
let noTLS = 'true'; // false
let BotToken =''; //可以为空，或者@BotFather中输入/start，/newbot，并关注机器人
let ChatID =''; //可以为空，或者@userinfobot中获取，/start
let vmessLinks = [ //本地CFcdnVmess节点池
	//'vmess://ew0KICAidiI6ICIyIiwNCiAgInBzIjogIk5MIiwNCiAgImFkZCI6ICJjZi4wOTAyMjcueHl6IiwNCiAgInBvcnQiOiAiNDQzIiwNCiAgImlkIjogIjA2MTk1YjViLTM4MTUtNGEwNy05NmY3LTQ3ZWVmYmIxYjE0MyIsDQogICJhaWQiOiAiMCIsDQogICJzY3kiOiAiYXV0byIsDQogICJuZXQiOiAid3MiLA0KICAidHlwZSI6ICJub25lIiwNCiAgImhvc3QiOiAidXJueGV3enZoLnNpdGUiLA0KICAicGF0aCI6ICIva3dobXZ3cyIsDQogICJ0bHMiOiAidGxzIiwNCiAgInNuaSI6ICJ1cm54ZXd6dmguc2l0ZSIsDQogICJhbHBuIjogIiIsDQogICJmcCI6ICIiDQp9',
];
let vmessLinksURL = 'https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/vmesslinks';//CFcdnVmess节点池URL
//let vmessLinksURL = 'https://raw.githubusercontent.com/rxsweet/CM_Vmess/main/vmesslinks';//CFcdnVmess节点池URL
let proxyhosts = [//本地代理域名池
	//'ppfv2tl9veojd-maillazy.pages.dev',
];
let proxyhostsURL = 'https://raw.githubusercontent.com/cmliu/CFcdnVmess2sub/main/proxyhosts';//在线代理域名池URL
let FileName = 'rxVmess';
let SUBUpdateTime = 6; 
let total = 99;//PB
//let timestamp = now;
let timestamp = 4102329600000;//2099-12-31
const regex = /^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[.*\]):?(\d+)?#?(.*)?$/;
// 虚假uuid和hostname，用于发送给配置生成服务
let fakeUserID ;
let fakeHostName ;

/*Obfuscate-rx*/
const _0x637881=_0x589c;function _0x589c(_0x102a7a,_0x221ce6){const _0x4c3942=_0x4c39();return _0x589c=function(_0x589c27,_0x3a93fc){_0x589c27=_0x589c27-0xc4;let _0x70b06f=_0x4c3942[_0x589c27];return _0x70b06f;},_0x589c(_0x102a7a,_0x221ce6);}(function(_0xabbd16,_0x22e513){const _0x5c8a8e=_0x589c,_0x302360=_0xabbd16();while(!![]){try{const _0x500575=parseInt(_0x5c8a8e(0x13c))/0x1+-parseInt(_0x5c8a8e(0xe2))/0x2*(-parseInt(_0x5c8a8e(0x121))/0x3)+parseInt(_0x5c8a8e(0x109))/0x4+-parseInt(_0x5c8a8e(0x139))/0x5+-parseInt(_0x5c8a8e(0x10d))/0x6*(parseInt(_0x5c8a8e(0x114))/0x7)+parseInt(_0x5c8a8e(0x10e))/0x8+-parseInt(_0x5c8a8e(0xd6))/0x9;if(_0x500575===_0x22e513)break;else _0x302360['push'](_0x302360['shift']());}catch(_0x2e35c9){_0x302360['push'](_0x302360['shift']());}}}(_0x4c39,0x8781a));function utf8ToBase64(_0x2e4ec8){return btoa(unescape(encodeURIComponent(_0x2e4ec8)));}async function sendMessage(_0x5f1012,_0x41aee9,_0xf58b7e=''){const _0x3b0bda=_0x589c;if(BotToken!==''&&ChatID!==''){let _0x229526='';const _0x5d1581=await fetch(_0x3b0bda(0xe0)+_0x41aee9+_0x3b0bda(0xca));if(_0x5d1581[_0x3b0bda(0xe9)]==0xc8){const _0x1fba37=await _0x5d1581[_0x3b0bda(0x160)]();_0x229526=_0x5f1012+_0x3b0bda(0xf9)+_0x41aee9+_0x3b0bda(0x124)+_0x1fba37[_0x3b0bda(0x10a)]+_0x3b0bda(0x115)+_0x1fba37[_0x3b0bda(0x152)]+_0x3b0bda(0xf8)+_0x1fba37[_0x3b0bda(0x153)]+_0x3b0bda(0x104)+_0x1fba37['as']+'\x0a'+_0xf58b7e;}else _0x229526=_0x5f1012+'\x0aIP:\x20'+_0x41aee9+_0x3b0bda(0x105)+_0xf58b7e;let _0x3eb5f0=_0x3b0bda(0x147)+BotToken+_0x3b0bda(0xe6)+ChatID+_0x3b0bda(0x11b)+encodeURIComponent(_0x229526);return fetch(_0x3eb5f0,{'method':_0x3b0bda(0x106),'headers':{'Accept':'text/html,application/xhtml+xml,application/xml;','Accept-Encoding':_0x3b0bda(0x159),'User-Agent':_0x3b0bda(0xf7)}});}}let MamaJustKilledAMan=['telegram',_0x637881(0x148),_0x637881(0x13e)];async function getAddressesapi(_0x34a0d3){const _0x6c33c0=_0x637881;if(!_0x34a0d3||_0x34a0d3[_0x6c33c0(0xd1)]===0x0)return[];let _0x4fd852='';const _0x285c72=new AbortController(),_0x2441ba=setTimeout(()=>{const _0x464aab=_0x6c33c0;_0x285c72[_0x464aab(0x107)]();},0x7d0);try{const _0x4cf535=await Promise[_0x6c33c0(0x141)](_0x34a0d3['map'](_0x1548db=>fetch(_0x1548db,{'method':_0x6c33c0(0x106),'headers':{'Accept':'text/html,application/xhtml+xml,application/xml;','User-Agent':_0x6c33c0(0xd7)},'signal':_0x285c72[_0x6c33c0(0x14c)]})[_0x6c33c0(0x116)](_0x4fe52f=>_0x4fe52f['ok']?_0x4fe52f[_0x6c33c0(0xce)]():Promise[_0x6c33c0(0x113)]())));for(const _0x117523 of _0x4cf535){if(_0x117523[_0x6c33c0(0xe9)]===_0x6c33c0(0xfd)){const _0x3788a0=await _0x117523['value'];_0x4fd852+=_0x3788a0+'\x0a';}}}catch(_0x5cc5e6){console['error'](_0x5cc5e6);}finally{clearTimeout(_0x2441ba);}const _0x567689=await ADD(_0x4fd852);return _0x567689;}async function getAddressescsv(_0x18d207){const _0x38aab8=_0x637881;if(!addressescsv||addressescsv[_0x38aab8(0xd1)]===0x0)return[];let _0x4b37eb=[];for(const _0x18cce6 of addressescsv){try{const _0x4fd8b8=await fetch(_0x18cce6);if(!_0x4fd8b8['ok']){console[_0x38aab8(0x120)](_0x38aab8(0xe7),_0x4fd8b8[_0x38aab8(0xe9)],_0x4fd8b8[_0x38aab8(0x149)]);continue;}const _0x13f2e2=await _0x4fd8b8[_0x38aab8(0xce)]();let _0xfca664;_0x13f2e2[_0x38aab8(0x127)]('\x0d\x0a')?_0xfca664=_0x13f2e2[_0x38aab8(0x142)]('\x0d\x0a'):_0xfca664=_0x13f2e2[_0x38aab8(0x142)]('\x0a');const _0x2299a0=_0xfca664[0x0][_0x38aab8(0x142)](','),_0x2b0659=_0x2299a0[_0x38aab8(0x140)](_0x38aab8(0x10c)),_0x433a54=0x0,_0x323ab1=0x1,_0x2f09d5=_0x2b0659+0x1;if(_0x2b0659===-0x1){console[_0x38aab8(0x120)](_0x38aab8(0xf0));continue;}for(let _0x2e194d=0x1;_0x2e194d<_0xfca664[_0x38aab8(0xd1)];_0x2e194d++){const _0x2a5ac1=_0xfca664[_0x2e194d]['split'](','),_0x470788=_0x2a5ac1[_0x38aab8(0xd1)]-0x1;if(_0x2a5ac1[_0x2b0659][_0x38aab8(0x11f)]()===_0x18d207&&parseFloat(_0x2a5ac1[_0x470788])>DLS){const _0xb9918d=_0x2a5ac1[_0x433a54],_0x67593f=_0x2a5ac1[_0x323ab1],_0x216228=_0x2a5ac1[_0x2f09d5],_0x2ebe2d=_0xb9918d+':'+_0x67593f+'#'+_0x216228;_0x4b37eb[_0x38aab8(0x103)](_0x2ebe2d);}}}catch(_0xf6e0a4){console[_0x38aab8(0x120)](_0x38aab8(0xe7),_0xf6e0a4);continue;}}return _0x4b37eb;}async function ADD(_0x43301a){const _0x2992ec=_0x637881;var _0x516952=_0x43301a[_0x2992ec(0x102)](/[	|"'\r\n]+/g,',')[_0x2992ec(0x102)](/,+/g,',');if(_0x516952[_0x2992ec(0x132)](0x0)==',')_0x516952=_0x516952[_0x2992ec(0xf4)](0x1);if(_0x516952[_0x2992ec(0x132)](_0x516952[_0x2992ec(0xd1)]-0x1)==',')_0x516952=_0x516952[_0x2992ec(0xf4)](0x0,_0x516952['length']-0x1);const _0x195fcc=_0x516952[_0x2992ec(0x142)](',');return _0x195fcc;}async function nginx(){const _0x11a137=_0x637881,_0x3154c3=_0x11a137(0xd2);return _0x3154c3;}function _0x4c39(){const _0x4921df=['917355QNJlnM','\x0a\x09\x09\x09缺少必填参数：host\x20和\x20uuid\x0a\x09\x09\x09Missing\x20required\x20parameters:\x20host\x20and\x20uuid\x0a\x09\x09\x09پارامترهای\x20ضروری\x20وارد\x20نشده:\x20هاست\x20و\x20یوآی‌دی\x0a\x09\x09\x09\x0a\x09\x09\x09','https://ipapi.co/','\x0a国家:\x20','searchParams','&insert=false&config=','includes','\x22,\x0a\x22scy\x22:\x20\x22','href','join','ceil','encode','获取地址时出错:','map','VMESS','redirect','URL302','charAt','/sub?target=clash&url=','subtle','subconverter','headers','clash','text/html;\x20charset=UTF-8','2107600lRZezl','hostname','url','378963kVZhOs','format','miaoko','aid','indexOf','allSettled','split',';\x20download=','\x22,\x0a\x22tls\x22:\x20\x22tls\x22,\x0a\x22sni\x22:\x20\x22','SUBNAME','message','https://api.telegram.org/bot','twitter','statusText','/sub?target=singbox&url=','parse','signal','concat','#VMess订阅','sni','https://','path','city','org','vmess://','CF-Connecting-IP','\x22,\x0a\x22port\x22:\x20\x22','ADD','toLowerCase','gzip,\x20deflate,\x20br','{\x0a\x22v\x22:\x20\x222\x22,\x0a\x22ps\x22:\x20\x22','\x0a<tg-spoiler>入口:\x20','host','LINK','ADDAPI',';\x20expire=','json','.xyz','MD5','true','</tg-spoiler>','/?ed=2560','security','?lang=zh-CN','TGID','floor','upload=','text','trycloudflare','null','length','\x0a\x09<!DOCTYPE\x20html>\x0a\x09<html>\x0a\x09<head>\x0a\x09<title>Welcome\x20to\x20nginx!</title>\x0a\x09<style>\x0a\x09\x09body\x20{\x0a\x09\x09\x09width:\x2035em;\x0a\x09\x09\x09margin:\x200\x20auto;\x0a\x09\x09\x09font-family:\x20Tahoma,\x20Verdana,\x20Arial,\x20sans-serif;\x0a\x09\x09}\x0a\x09</style>\x0a\x09</head>\x0a\x09<body>\x0a\x09<h1>Welcome\x20to\x20nginx!</h1>\x0a\x09<p>If\x20you\x20see\x20this\x20page,\x20the\x20nginx\x20web\x20server\x20is\x20successfully\x20installed\x20and\x0a\x09working.\x20Further\x20configuration\x20is\x20required.</p>\x0a\x09\x0a\x09<p>For\x20online\x20documentation\x20and\x20support\x20please\x20refer\x20to\x0a\x09<a\x20href=\x22http://nginx.org/\x22>nginx.org</a>.<br/>\x0a\x09Commercial\x20support\x20is\x20available\x20at\x0a\x09<a\x20href=\x22http://nginx.com/\x22>nginx.com</a>.</p>\x0a\x09\x0a\x09<p><em>Thank\x20you\x20for\x20using\x20nginx.</em></p>\x0a\x09</body>\x0a\x09</html>\x0a\x09','ADDNOTLS','getTime','\x22,\x0a\x22id\x22:\x20\x22','13274703gxayNQ','cmliu/WorkerVless2sub','origin','\x22,\x0a\x22alpn\x22:\x20\x22\x22,\x0a\x22fp\x22:\x20\x22\x22\x0a}','test','from','/sub','\x22,\x0a\x22tls\x22:\x20\x22\x22,\x0a\x22sni\x22:\x20\x22\x22,\x0a\x22alpn\x22:\x20\x22\x22,\x0a\x22fp\x22:\x20\x22\x22\x0a}','TGTOKEN','match','http://ip-api.com/json/','User-Agent','6SJDRwj','nekobox','random','padStart','/sendMessage?chat_id=','获取CSV地址时出错:','attachment;\x20filename*=utf-8\x27\x27','status','TRUE','startsWith','\x22,\x0a\x22aid\x22:\x20\x22','text/plain;\x20charset=utf-8','NOTLS','cf-workers-sub','CSV文件缺少必需的字段',';\x20total=','search','DLS','slice','URL','port','Mozilla/5.0\x20Chrome/90.0.4430.72','\x0a组织:\x20','\x0aIP:\x20','toString','singbox','ADDNOTLSAPI','fulfilled','Error:\x20','notls','filter','some','replace','push','\x0aASN:\x20','\x0a<tg-spoiler>','get','abort','pathname','1714112aZOXZw','country','&&emoji=false&insert=false&scv=true&udp=true&list=false&tfo=false&fdn=false&sort=false','TLS','1626810SxrMTC','7982480pGRzyw','\x22,\x0a\x22path\x22:\x20\x22','scy','sing-box','now','reject','7Phbehx','\x0a<tg-spoiler>城市:\x20','then','/json','&config=','auto','SUBCONFIG','&parse_mode=HTML&text=','digest','ADDCSV','alterid','toUpperCase','error'];_0x4c39=function(){return _0x4921df;};return _0x4c39();}export default{async 'fetch'(_0x546e39,_0x3f3ce8){const _0x185064=_0x637881;if(_0x3f3ce8['TOKEN'])mytoken=await ADD(_0x3f3ce8['TOKEN']);BotToken=_0x3f3ce8[_0x185064(0xde)]||BotToken,ChatID=_0x3f3ce8[_0x185064(0xcb)]||ChatID,subconverter=_0x3f3ce8['SUBAPI']||subconverter,subconfig=_0x3f3ce8[_0x185064(0x11a)]||subconfig,FileName=_0x3f3ce8[_0x185064(0x145)]||FileName;const _0x287b36=_0x546e39[_0x185064(0x136)]['get'](_0x185064(0xe1))||_0x185064(0xd0),_0x1ad4bc=_0x287b36[_0x185064(0x158)](),_0x2dfb68=new URL(_0x546e39[_0x185064(0x13b)]),_0x40db5f=_0x2dfb68[_0x185064(0x125)][_0x185064(0x106)]('format')?_0x2dfb68[_0x185064(0x125)][_0x185064(0x106)](_0x185064(0x13d))[_0x185064(0x158)]():_0x185064(0xd0);let _0x4c0e4d='',_0x3206d0='',_0x36d258='',_0x169fbc='',_0x4d1325='',_0x1a7efd='',_0x5218eb='',_0x855f6b=Math['floor']((timestamp-Date[_0x185064(0x112)]())/timestamp*0x63*0x10000000000*0x400/0x2);if(_0x3f3ce8['UA'])MamaJustKilledAMan=MamaJustKilledAMan[_0x185064(0x14d)](await ADD(_0x3f3ce8['UA']));const _0x1809d1=new Date(),_0x4b77d7=await MD5MD5(Math[_0x185064(0x12b)](_0x1809d1[_0x185064(0xd4)]()));fakeUserID=_0x4b77d7[_0x185064(0xf4)](0x0,0x8)+'-'+_0x4b77d7[_0x185064(0xf4)](0x8,0xc)+'-'+_0x4b77d7['slice'](0xc,0x10)+'-'+_0x4b77d7['slice'](0x10,0x14)+'-'+_0x4b77d7[_0x185064(0xf4)](0x14),fakeHostName=_0x4b77d7[_0x185064(0xf4)](0x6,0x9)+'.'+_0x4b77d7[_0x185064(0xf4)](0xd,0x13)+_0x185064(0xc4),total=total*0x10000000000*0x400;let _0x31dcf=Math['floor'](timestamp/0x3e8);if(_0x3f3ce8[_0x185064(0x15d)])vmessLinks=await ADD(_0x3f3ce8[_0x185064(0x15d)]);else{if(_0x3f3ce8[_0x185064(0x12f)])vmessLinks=await ADD(_0x3f3ce8[_0x185064(0x12f)]);}if(_0x3f3ce8['ADD'])addresses=await ADD(_0x3f3ce8[_0x185064(0x157)]);if(_0x3f3ce8[_0x185064(0x15e)])addressesapi=await ADD(_0x3f3ce8[_0x185064(0x15e)]);if(_0x3f3ce8[_0x185064(0xd3)])addressesnotls=await ADD(_0x3f3ce8[_0x185064(0xd3)]);if(_0x3f3ce8['ADDNOTLSAPI'])addressesnotlsapi=await ADD(_0x3f3ce8[_0x185064(0xfc)]);if(_0x3f3ce8[_0x185064(0x11d)])addressescsv=await ADD(_0x3f3ce8[_0x185064(0x11d)]);DLS=_0x3f3ce8[_0x185064(0xf3)]||DLS;if(mytoken['length']>0x0&&mytoken['some'](_0x1d55f4=>_0x2dfb68[_0x185064(0x108)][_0x185064(0x127)](_0x1d55f4))){if(vmessLinksURL&&vmessLinks[_0x185064(0xd1)]==0x0)try{const _0x180ea4=await fetch(vmessLinksURL);if(!_0x180ea4['ok']){console[_0x185064(0x120)](_0x185064(0x12d),_0x180ea4[_0x185064(0xe9)],_0x180ea4[_0x185064(0x149)]);return;}const _0x78b717=await _0x180ea4[_0x185064(0xce)](),_0x5f3fe8=_0x78b717[_0x185064(0x142)]('\x0a'),_0x322017=_0x5f3fe8[_0x185064(0x100)](_0x2b6a89=>_0x2b6a89[_0x185064(0xeb)](_0x185064(0x154)));vmessLinks=vmessLinks['concat'](_0x322017);}catch(_0x153b6b){console[_0x185064(0x120)]('获取地址时出错:',_0x153b6b);}const _0x375393=[...new Set(vmessLinks)],_0x3b4eea=_0x375393[Math[_0x185064(0xcc)](Math[_0x185064(0xe4)]()*_0x375393[_0x185064(0xd1)])];noTLS='false';const _0x52de91=_0x3b4eea[_0x185064(0xf4)](0x8),_0x2425f6=atob(_0x52de91),_0x24e516=JSON[_0x185064(0x14b)](_0x2425f6);_0x36d258=_0x24e516['id'],_0x169fbc='/'+_0x24e516[_0x185064(0x15c)]+':'+_0x24e516[_0x185064(0xf6)]+_0x24e516['path'],_0x4d1325=_0x24e516[_0x185064(0x13f)],_0x1a7efd=_0x24e516[_0x185064(0x110)];const _0x19b4ee=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;_0x4c0e4d='未知';let _0x10260c=_0x185064(0xe0)+_0x24e516[_0x185064(0x15c)]+_0x185064(0xca);if(_0x19b4ee[_0x185064(0xda)](_0x24e516['ps']))_0x10260c=_0x185064(0x123)+_0x24e516['ps']+'/json';const _0x3fe32d=await fetch(_0x10260c);if(_0x3fe32d[_0x185064(0xe9)]==0xc8){const _0xed550a=await _0x3fe32d[_0x185064(0x160)]();_0x4c0e4d=_0xed550a['country']+'\x20'+_0xed550a[_0x185064(0x152)];}if(proxyhostsURL)try{const _0x323d5d=await fetch(proxyhostsURL);if(!_0x323d5d['ok']){console[_0x185064(0x120)]('获取地址时出错:',_0x323d5d[_0x185064(0xe9)],_0x323d5d[_0x185064(0x149)]);return;}const _0x4f42b6=await _0x323d5d['text'](),_0x499692=_0x4f42b6[_0x185064(0x142)]('\x0a'),_0x1d4e53=_0x499692['filter'](_0x46d91b=>_0x46d91b['trim']()!=='');proxyhosts=proxyhosts[_0x185064(0x14d)](_0x1d4e53);}catch(_0x3bc947){console[_0x185064(0x120)](_0x185064(0x12d),_0x3bc947);}const _0x217ddf=[...new Set(proxyhosts)];_0x3206d0=_0x217ddf[Math['floor'](Math[_0x185064(0xe4)]()*_0x217ddf['length'])],_0x5218eb=_0x3206d0,await sendMessage(_0x185064(0x14e),_0x546e39['headers']['get'](_0x185064(0x155)),'UA:\x20'+_0x287b36+'</tg-spoiler>\x0a域名:\x20'+_0x2dfb68[_0x185064(0x13a)]+_0x185064(0x15b)+(_0x2dfb68[_0x185064(0x108)]+_0x2dfb68[_0x185064(0xf2)])+_0x185064(0xc7));}else{_0x3206d0=_0x2dfb68['searchParams'][_0x185064(0x106)]('host'),_0x36d258=_0x2dfb68['searchParams'][_0x185064(0x106)]('uuid'),_0x169fbc=_0x2dfb68['searchParams']['get'](_0x185064(0x151))||_0x185064(0xc8),_0x169fbc=_0x169fbc[0x0]==='/'?_0x169fbc:'/'+_0x169fbc,_0x4d1325=_0x2dfb68[_0x185064(0x125)][_0x185064(0x106)](_0x185064(0x11e))||'0',_0x1a7efd=_0x2dfb68[_0x185064(0x125)][_0x185064(0x106)](_0x185064(0xc9))||_0x185064(0x119),_0x5218eb=_0x2dfb68[_0x185064(0x125)][_0x185064(0x106)](_0x185064(0x14f))||_0x3206d0,_0x4c0e4d=_0x2dfb68['searchParams'][_0x185064(0x106)]('cc')||'未知';const _0x2d2243=_0x2dfb68['pathname'][_0x185064(0x102)](/^\/|\/$/g,'');if(_0x2d2243&&!_0x2dfb68[_0x185064(0x108)]['includes'](_0x185064(0xdc))){const _0x517b9a=new URL(_0x185064(0x150)+_0x2d2243+_0x2dfb68['search']);return fetch(new Request(_0x517b9a,_0x546e39));}else{if(!_0x2dfb68[_0x185064(0x108)]['includes']('/sub')){const _0x5225df=_0x3f3ce8['URL302']?'URL302':_0x3f3ce8['URL']?_0x185064(0xf5):null;if(_0x5225df){const _0x3fc9b7=await ADD(_0x3f3ce8[_0x5225df]),_0x189af1=_0x3fc9b7[Math[_0x185064(0xcc)](Math['random']()*_0x3fc9b7[_0x185064(0xd1)])];return _0x5225df===_0x185064(0x131)?Response[_0x185064(0x130)](_0x189af1,0x12e):fetch(new Request(_0x189af1,_0x546e39));}return new Response(await nginx(),{'headers':{'Content-Type':_0x185064(0x138)}});}}if(_0x4c0e4d=='未知'){let _0x217c6b=_0x185064(0x123)+_0x5218eb+_0x185064(0x117);const _0xd53bd8=await fetch(_0x217c6b);if(_0xd53bd8[_0x185064(0xe9)]==0xc8){const _0x307f7e=await _0xd53bd8['json']();_0x4c0e4d=_0x307f7e[_0x185064(0x10a)]+'\x20'+_0x307f7e['city'];}}if(!_0x3206d0||!_0x36d258){const _0x34f72c=_0x2dfb68[_0x185064(0xd8)]+_0x2dfb68[_0x185064(0x108)],_0x1b3369=_0x185064(0x122)+_0x34f72c+'?cc=[vmess\x20name]&host=[your\x20host]&uuid=[your\x20uuid]&path=[your\x20path]\x0a\x09\x09\x09\x0a\x09\x09\x09\x0a\x09\x09\x09\x0a\x09\x09\x09\x0a\x09\x09\x09\x0a\x09\x09\x09\x0a\x09\x09\x09\x09\x0a\x09\x09\x09\x09https://github.com/cmliu/CFcdnVmess2sub\x0a\x09\x09\x09\x09';return new Response(_0x1b3369,{'status':0x190,'headers':{'content-type':'text/plain;\x20charset=utf-8'}});}}if(_0x3206d0[_0x185064(0x158)]()[_0x185064(0x127)](_0x185064(0xff))||_0x3206d0[_0x185064(0x158)]()[_0x185064(0x127)](_0x185064(0xcf)))noTLS=_0x185064(0xc6);noTLS=_0x3f3ce8[_0x185064(0xee)]||noTLS;let _0xa97644=generateFakeInfo(_0x2dfb68[_0x185064(0x129)],_0x36d258,_0x3206d0);if(!_0x1ad4bc['includes'](_0x185064(0x135))&&MamaJustKilledAMan[_0x185064(0x101)](_0x233bdc=>_0x287b36[_0x185064(0x158)]()[_0x185064(0x127)](_0x233bdc))&&MamaJustKilledAMan[_0x185064(0xd1)]>0x0){const _0x216ccd=_0x3f3ce8[_0x185064(0x131)]?'URL302':_0x3f3ce8[_0x185064(0xf5)]?_0x185064(0xf5):null;if(_0x216ccd){const _0x35efe3=await ADD(_0x3f3ce8[_0x216ccd]),_0x5998ec=_0x35efe3[Math[_0x185064(0xcc)](Math[_0x185064(0xe4)]()*_0x35efe3[_0x185064(0xd1)])];return _0x216ccd==='URL302'?Response[_0x185064(0x130)](_0x5998ec,0x12e):fetch(new Request(_0x5998ec,_0x546e39));}return new Response(await nginx(),{'headers':{'Content-Type':_0x185064(0x138)}});}else{if((_0x1ad4bc[_0x185064(0x127)](_0x185064(0x137))||_0x40db5f===_0x185064(0x137)&&!_0x1ad4bc[_0x185064(0x127)](_0x185064(0x135)))&&!_0x1ad4bc[_0x185064(0x127)](_0x185064(0xe3))&&!_0x1ad4bc['includes'](_0x185064(0xef)))_0xa97644='https://'+subconverter+_0x185064(0x133)+encodeURIComponent(_0xa97644)+_0x185064(0x118)+encodeURIComponent(subconfig)+_0x185064(0x10b);else{if((_0x1ad4bc[_0x185064(0x127)](_0x185064(0x111))||_0x1ad4bc[_0x185064(0x127)]('singbox')||_0x40db5f===_0x185064(0xfb)&&!_0x1ad4bc[_0x185064(0x127)]('subconverter'))&&!_0x1ad4bc[_0x185064(0x127)](_0x185064(0xef)))_0xa97644=_0x185064(0x150)+subconverter+_0x185064(0x14a)+encodeURIComponent(_0xa97644)+_0x185064(0x126)+encodeURIComponent(subconfig)+'&emoji=true&list=false&tfo=false&scv=true&fdn=false&sort=false&new_name=true';else{let _0x483579;if(noTLS==_0x185064(0xc6)){const _0xc15cd6=await getAddressesapi(addressesnotlsapi),_0x5468d3=await getAddressescsv('FALSE');addressesnotls=addressesnotls[_0x185064(0x14d)](_0xc15cd6),addressesnotls=addressesnotls['concat'](_0x5468d3);const _0x1451d5=[...new Set(addressesnotls)];_0x483579=_0x1451d5[_0x185064(0x12e)](_0x2791ef=>{const _0x3fe134=_0x185064;let _0x2e7f71='80',_0x453230=_0x2791ef;const _0x1e7b86=_0x453230[_0x3fe134(0xdf)](regex);if(!_0x1e7b86){if(_0x2791ef[_0x3fe134(0x127)](':')&&_0x2791ef[_0x3fe134(0x127)]('#')){const _0x259c38=_0x2791ef[_0x3fe134(0x142)](':');_0x2791ef=_0x259c38[0x0];const _0x5007a6=_0x259c38[0x1][_0x3fe134(0x142)]('#');_0x2e7f71=_0x5007a6[0x0],_0x453230=_0x5007a6[0x1];}else{if(_0x2791ef[_0x3fe134(0x127)](':')){const _0x5d3b62=_0x2791ef[_0x3fe134(0x142)](':');_0x2791ef=_0x5d3b62[0x0],_0x2e7f71=_0x5d3b62[0x1];}else{if(_0x2791ef[_0x3fe134(0x127)]('#')){const _0x523f13=_0x2791ef[_0x3fe134(0x142)]('#');_0x2791ef=_0x523f13[0x0],_0x453230=_0x523f13[0x1];}}}_0x453230[_0x3fe134(0x127)](':')&&(_0x453230=_0x453230[_0x3fe134(0x142)](':')[0x0]);}else _0x2791ef=_0x1e7b86[0x1],_0x2e7f71=_0x1e7b86[0x2]||_0x2e7f71,_0x453230=_0x1e7b86[0x3]||_0x2791ef;const _0x360b34=_0x3fe134(0x15a)+_0x453230+'>\x22,\x0a\x22add\x22:\x20\x22'+_0x2791ef+_0x3fe134(0x156)+_0x2e7f71+_0x3fe134(0xd5)+_0x36d258+'\x22,\x0a\x22aid\x22:\x20\x22'+_0x4d1325+_0x3fe134(0x128)+_0x1a7efd+'\x22,\x0a\x22net\x22:\x20\x22ws\x22,\x0a\x22type\x22:\x20\x22none\x22,\x0a\x22host\x22:\x20\x22'+_0x3206d0+_0x3fe134(0x10f)+_0x169fbc+_0x3fe134(0xdd),_0x392412=utf8ToBase64(_0x360b34),_0x570b6c=_0x3fe134(0x154)+_0x392412;return _0x570b6c;})[_0x185064(0x12a)]('\x0a');}const _0xe1e855=await getAddressesapi(addressesapi),_0x693c0f=await getAddressescsv(_0x185064(0xea));addresses=addresses[_0x185064(0x14d)](_0xe1e855),addresses=addresses[_0x185064(0x14d)](_0x693c0f);const _0x500437=[...new Set(addresses)],_0x529ea0=_0x500437[_0x185064(0x12e)](_0x2b1e86=>{const _0x55ba0a=_0x185064;let _0x404c26='443',_0x4abd50=_0x2b1e86;const _0x3b459b=_0x4abd50[_0x55ba0a(0xdf)](regex);if(!_0x3b459b){if(_0x2b1e86[_0x55ba0a(0x127)](':')&&_0x2b1e86[_0x55ba0a(0x127)]('#')){const _0x43dd1c=_0x2b1e86['split'](':');_0x2b1e86=_0x43dd1c[0x0];const _0x61b306=_0x43dd1c[0x1][_0x55ba0a(0x142)]('#');_0x404c26=_0x61b306[0x0],_0x4abd50=_0x61b306[0x1];}else{if(_0x2b1e86[_0x55ba0a(0x127)](':')){const _0x47f712=_0x2b1e86[_0x55ba0a(0x142)](':');_0x2b1e86=_0x47f712[0x0],_0x404c26=_0x47f712[0x1];}else{if(_0x2b1e86[_0x55ba0a(0x127)]('#')){const _0x55666a=_0x2b1e86[_0x55ba0a(0x142)]('#');_0x2b1e86=_0x55666a[0x0],_0x4abd50=_0x55666a[0x1];}}}_0x4abd50[_0x55ba0a(0x127)](':')&&(_0x4abd50=_0x4abd50[_0x55ba0a(0x142)](':')[0x0]);}else _0x2b1e86=_0x3b459b[0x1],_0x404c26=_0x3b459b[0x2]||_0x404c26,_0x4abd50=_0x3b459b[0x3]||_0x2b1e86;const _0x583f56='{\x0a\x22v\x22:\x20\x222\x22,\x0a\x22ps\x22:\x20\x22'+_0x4abd50+'\x22,\x0a\x22add\x22:\x20\x22'+_0x2b1e86+_0x55ba0a(0x156)+_0x404c26+_0x55ba0a(0xd5)+_0x36d258+_0x55ba0a(0xec)+_0x4d1325+_0x55ba0a(0x128)+_0x1a7efd+'\x22,\x0a\x22net\x22:\x20\x22ws\x22,\x0a\x22type\x22:\x20\x22none\x22,\x0a\x22host\x22:\x20\x22'+_0x3206d0+'\x22,\x0a\x22path\x22:\x20\x22'+_0x169fbc+_0x55ba0a(0x144)+_0x5218eb+_0x55ba0a(0xd9),_0x471b6e=utf8ToBase64(_0x583f56),_0x555001=_0x55ba0a(0x154)+_0x471b6e;return _0x555001;})['join']('\x0a');let _0x49de93=_0x529ea0;if(noTLS=='true')_0x49de93+='\x0a'+_0x483579;const _0x4fb255=btoa(_0x49de93),_0x166130=new Response(_0x4fb255,{'headers':{'content-type':_0x185064(0xed),'Profile-Update-Interval':''+SUBUpdateTime,'Subscription-Userinfo':_0x185064(0xcd)+_0x855f6b+';\x20download='+_0x855f6b+_0x185064(0xf1)+total+_0x185064(0x15f)+_0x31dcf}});return _0x166130;}}}try{const _0x4fe173=await fetch(_0xa97644);if(!_0x4fe173['ok'])throw new Error('Error\x20fetching\x20subconverterUrl:\x20'+_0x4fe173[_0x185064(0xe9)]+'\x20'+_0x4fe173[_0x185064(0x149)]);let _0x103701=await _0x4fe173['text']();return _0x103701=revertFakeInfo(_0x103701,_0x36d258,_0x3206d0),new Response(_0x103701,{'headers':{'Content-Disposition':_0x185064(0xe8)+encodeURIComponent(FileName)+';\x20filename='+FileName,'content-type':'text/plain;\x20charset=utf-8','Profile-Update-Interval':''+SUBUpdateTime,'Subscription-Userinfo':_0x185064(0xcd)+_0x855f6b+_0x185064(0x143)+_0x855f6b+';\x20total='+total+_0x185064(0x15f)+_0x31dcf}});}catch(_0x309657){return new Response(_0x185064(0xfe)+_0x309657[_0x185064(0x146)],{'status':0x1f4,'headers':{'content-type':'text/plain;\x20charset=utf-8'}});}}};async function MD5MD5(_0x3ea52d){const _0x19f842=_0x637881,_0x1d45b3=new TextEncoder(),_0x50405e=await crypto[_0x19f842(0x134)][_0x19f842(0x11c)](_0x19f842(0xc5),_0x1d45b3[_0x19f842(0x12c)](_0x3ea52d)),_0x531b6e=Array[_0x19f842(0xdb)](new Uint8Array(_0x50405e)),_0x42e734=_0x531b6e['map'](_0x25f532=>_0x25f532[_0x19f842(0xfa)](0x10)[_0x19f842(0xe5)](0x2,'0'))[_0x19f842(0x12a)](''),_0x4b8e80=await crypto[_0x19f842(0x134)]['digest'](_0x19f842(0xc5),_0x1d45b3['encode'](_0x42e734[_0x19f842(0xf4)](0x7,0x1b))),_0x2f0c84=Array[_0x19f842(0xdb)](new Uint8Array(_0x4b8e80)),_0x231afd=_0x2f0c84[_0x19f842(0x12e)](_0x923353=>_0x923353['toString'](0x10)['padStart'](0x2,'0'))[_0x19f842(0x12a)]('');return _0x231afd[_0x19f842(0x158)]();}function revertFakeInfo(_0x35c377,_0x776f04,_0x10419f){const _0x5520de=_0x637881;return _0x35c377=_0x35c377[_0x5520de(0x102)](new RegExp(fakeUserID,'g'),_0x776f04)[_0x5520de(0x102)](new RegExp(fakeHostName,'g'),_0x10419f),_0x35c377;}function generateFakeInfo(_0x1cc4dc,_0x370b98,_0x58ec0d){const _0x169a0e=_0x637881;return _0x1cc4dc=_0x1cc4dc['replace'](new RegExp(_0x370b98,'g'),fakeUserID)[_0x169a0e(0x102)](new RegExp(_0x58ec0d,'g'),fakeHostName),_0x1cc4dc;}
